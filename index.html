<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Investment Profit Calculator</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-gray-900 to-gray-800 text-white p-4">

<div class="max-w-xl mx-auto bg-gray-900/70 rounded-2xl p-4 shadow-xl">
  <h1 class="text-2xl font-bold mb-4 text-center">üìà Investment Profit Calculator</h1>

  <div class="mb-4 flex justify-between items-center">
    <span>‡∏ó‡∏∏‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: <strong id="initialCapital">500</strong></span>
    <button id="addCategory" class="bg-blue-600 px-3 py-1 rounded hover:bg-blue-700">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</button>
  </div>

  <div id="categoriesContainer" class="space-y-6">
    <!-- ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á -->
    <div class="category bg-gray-800/50 rounded-xl p-3">
      <div class="flex justify-between items-center mb-2">
        <input type="text" class="categoryName bg-gray-700/50 rounded p-1 w-2/3" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà" value="‡∏Å‡∏•‡∏∏‡πà‡∏° A">
      </div>
      <div class="itemsContainer space-y-2">
        <div class="item bg-gray-700/50 rounded-xl p-2 grid grid-cols-6 gap-2 items-center">
          <input type="text" class="name bg-gray-600/50 rounded p-1 text-center" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£" value="‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á 1">
          <input type="number" class="cost bg-gray-600/50 rounded p-1 text-center" placeholder="‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏°" value="500">
          <input type="number" class="price bg-gray-600/50 rounded p-1 text-center" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏ä‡∏¥‡πâ‡∏ô" value="10">
          <input type="number" class="qty bg-gray-600/50 rounded p-1 text-center" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" value="10">
          <div class="profitPer text-center font-medium">5</div>
          <div class="totalProfit text-center font-bold">50</div>
          <button class="remove bg-red-600 rounded px-2 py-1 hover:bg-red-700">‡∏•‡∏ö</button>
        </div>
      </div>
      <button class="addItem bg-green-600 px-3 py-1 rounded mt-2 hover:bg-green-700">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
    </div>
  </div>

  <div class="mt-4 bg-gray-800/50 rounded-xl p-3 space-y-1 text-sm">
    <div class="flex justify-between"><span>‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</span><span id="totalCost">0</span></div>
    <div class="flex justify-between"><span>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</span><span id="totalRevenue">0</span></div>
    <div class="flex justify-between"><span>‡∏Å‡∏≥‡πÑ‡∏£‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</span><span id="grandProfit">0</span></div>
    <div class="flex justify-between"><span>ROI:</span><span id="roi">0%</span></div>
  </div>
</div>

<script>
function updateRow(row){
  const cost = Number(row.querySelector(".cost").value);
  const price = Number(row.querySelector(".price").value);
  const qty = Number(row.querySelector(".qty").value);

  const profitPer = price - (cost/qty); // ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏°‡∏´‡∏≤‡∏£‡∏à‡∏≥‡∏ô‡∏ß‡∏ô
  const totalProfit = profitPer * qty;

  row.querySelector(".profitPer").textContent = profitPer.toLocaleString();
  row.querySelector(".totalProfit").textContent = totalProfit.toLocaleString();
}

function updateSummary(){
  let totalCost = 0, totalRevenue = 0, grandProfit = 0;
  document.querySelectorAll(".item").forEach(row=>{
    const cost = Number(row.querySelector(".cost").value);
    const price = Number(row.querySelector(".price").value);
    const qty = Number(row.querySelector(".qty").value);

    totalCost += cost;
    totalRevenue += price*qty;
    grandProfit += (price - (cost/qty))*qty;
  });

  document.getElementById("totalCost").textContent = totalCost.toLocaleString();
  document.getElementById("totalRevenue").textContent = totalRevenue.toLocaleString();
  document.getElementById("grandProfit").textContent = grandProfit.toLocaleString();
  document.getElementById("roi").textContent = totalCost>0 ? ((grandProfit/totalCost)*100).toFixed(2)+"%" : "0%";
}

function attachRowEvents(row){
  ["cost","price","qty","name"].forEach(cls=>{
    row.querySelector("."+cls).addEventListener("input", ()=>{
      updateRow(row);
      updateSummary();
    });
  });
  row.querySelector(".remove").addEventListener("click", ()=>{
    row.remove();
    updateSummary();
  });
}

function attachCategoryEvents(category){
  const addBtn = category.querySelector(".addItem");
  addBtn.addEventListener("click", ()=>{
    const container = category.querySelector(".itemsContainer");
    const row = document.createElement("div");
    row.className = "item bg-gray-700/50 rounded-xl p-2 grid grid-cols-6 gap-2 items-center";
    row.innerHTML = `
      <input type="text" class="name bg-gray-600/50 rounded p-1 text-center" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£">
      <input type="number" class="cost bg-gray-600/50 rounded p-1 text-center" placeholder="‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏°" value="0">
      <input type="number" class="price bg-gray-600/50 rounded p-1 text-center" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏ä‡∏¥‡πâ‡∏ô" value="0">
      <input type="number" class="qty bg-gray-600/50 rounded p-1 text-center" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" value="1">
      <div class="profitPer text-center font-medium">0</div>
      <div class="totalProfit text-center font-bold">0</div>
      <button class="remove bg-red-600 rounded px-2 py-1 hover:bg-red-700">‡∏•‡∏ö</button>
    `;
    container.appendChild(row);
    attachRowEvents(row);
  });

  category.querySelectorAll(".item").forEach(attachRowEvents);
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏´‡∏°‡πà
document.getElementById("addCategory").addEventListener("click", ()=>{
  const container = document.getElementById("categoriesContainer");
  const category = document.createElement("div");
  category.className = "category bg-gray-800/50 rounded-xl p-3";
  category.innerHTML = `
    <div class="flex justify-between items-center mb-2">
      <input type="text" class="categoryName bg-gray-700/50 rounded p-1 w-2/3" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà">
    </div>
    <div class="itemsContainer space-y-2"></div>
    <button class="addItem bg-green-600 px-3 py-1 rounded mt-2 hover:bg-green-700">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
  `;
  container.appendChild(category);
  attachCategoryEvents(category);
});

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
document.querySelectorAll(".category").forEach(attachCategoryEvents);
updateSummary();
</script>

</body>
</html>
