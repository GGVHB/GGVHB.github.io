<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profit Calculator Mobile</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-gray-900 to-gray-800 text-white p-4">

<div class="max-w-xl mx-auto bg-gray-900/60 rounded-2xl p-4 shadow-xl">
  <h1 class="text-2xl font-bold mb-4 text-center">üìà Profit Calculator</h1>

  <div id="itemsContainer" class="space-y-4">
    <!-- ‡πÅ‡∏ñ‡∏ß‡πÅ‡∏£‡∏Å -->
    <div class="item bg-gray-800/50 rounded-xl p-3 grid grid-cols-6 gap-2 items-center">
      <input type="number" class="cost bg-gray-700/50 rounded p-1 text-center" placeholder="‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô" value="0">
      <input type="number" class="price bg-gray-700/50 rounded p-1 text-center" placeholder="‡∏Ç‡∏≤‡∏¢" value="0">
      <input type="number" class="qty bg-gray-700/50 rounded p-1 text-center" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" value="1">
      <div class="profitPer text-center font-medium">0</div>
      <div class="totalProfit text-center font-bold">0</div>
      <button class="remove bg-red-600 rounded px-2 py-1 hover:bg-red-700">‡∏•‡∏ö</button>
    </div>
  </div>

  <div class="flex justify-between mt-4">
    <button id="addItem" class="bg-green-600 px-4 py-2 rounded hover:bg-green-700">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
  </div>

  <div class="mt-4 bg-gray-800/50 rounded-xl p-3 space-y-1 text-sm">
    <div class="flex justify-between"><span>‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏£‡∏ß‡∏°:</span><span id="totalCost">0</span></div>
    <div class="flex justify-between"><span>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°:</span><span id="totalRevenue">0</span></div>
    <div class="flex justify-between"><span>‡∏Å‡∏≥‡πÑ‡∏£‡∏£‡∏ß‡∏°:</span><span id="grandProfit">0</span></div>
    <div class="flex justify-between"><span>ROI:</span><span id="roi">0%</span></div>
  </div>
</div>

<script>
function updateRow(row){
  const cost = Number(row.querySelector(".cost").value);
  const price = Number(row.querySelector(".price").value);
  const qty = Number(row.querySelector(".qty").value);

  const profitPer = price - cost;
  const totalProfit = profitPer * qty;

  row.querySelector(".profitPer").textContent = profitPer.toLocaleString();
  row.querySelector(".totalProfit").textContent = totalProfit.toLocaleString();
}

function updateSummary(){
  let totalCost = 0, totalRevenue = 0, grandProfit = 0;
  document.querySelectorAll(".item").forEach(row=>{
    const cost = Number(row.querySelector(".cost").value);
    const price = Number(row.querySelector(".price").value);
    const qty = Number(row.querySelector(".qty").value);
    totalCost += cost * qty;
    totalRevenue += price * qty;
    grandProfit += (price - cost) * qty;
  });

  document.getElementById("totalCost").textContent = totalCost.toLocaleString();
  document.getElementById("totalRevenue").textContent = totalRevenue.toLocaleString();
  document.getElementById("grandProfit").textContent = grandProfit.toLocaleString();
  document.getElementById("roi").textContent = totalCost>0 ? ((grandProfit/totalCost)*100).toFixed(2)+"%" : "0%";
}

function attachEvents(row){
  ["cost","price","qty"].forEach(cls=>{
    row.querySelector("."+cls).addEventListener("input", ()=>{
      updateRow(row);
      updateSummary();
    });
  });
  row.querySelector(".remove").addEventListener("click", ()=>{
    row.remove();
    updateSummary();
  });
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ñ‡∏ß‡πÉ‡∏´‡∏°‡πà
document.getElementById("addItem").addEventListener("click", ()=>{
  const container = document.getElementById("itemsContainer");
  const row = document.createElement("div");
  row.className = "item bg-gray-800/50 rounded-xl p-3 grid grid-cols-6 gap-2 items-center";
  row.innerHTML = `
    <input type="number" class="cost bg-gray-700/50 rounded p-1 text-center" placeholder="‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô" value="0">
    <input type="number" class="price bg-gray-700/50 rounded p-1 text-center" placeholder="‡∏Ç‡∏≤‡∏¢" value="0">
    <input type="number" class="qty bg-gray-700/50 rounded p-1 text-center" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" value="1">
    <div class="profitPer text-center font-medium">0</div>
    <div class="totalProfit text-center font-bold">0</div>
    <button class="remove bg-red-600 rounded px-2 py-1 hover:bg-red-700">‡∏•‡∏ö</button>
  `;
  container.appendChild(row);
  attachEvents(row);
});

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
document.querySelectorAll(".item").forEach(attachEvents);
updateSummary();
</script>

</body>
</html>
